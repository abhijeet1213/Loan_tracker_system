{% extends "layouts/base.html" %}

{% block title %} AKservices CMS {% endblock %} 




{% load static %}


{% block stylesheets %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<style>
    body{
       
        background:#FAFAFA;
    }
    .order-card {
        color: #fff;
    }
    
    .bg-c-blue {
        background: linear-gradient(45deg,#ffffff,#ffffff);
    }
    
    .bg-c-green {
        background: linear-gradient(45deg,#ffffff,#ffffff);
    }
    
    .bg-c-yellow {
        background: linear-gradient(45deg,#ffffff,#ffffff);
    }
    
    .bg-c-pink {
        background: linear-gradient(45deg,#ffffff,#ffffff);
    }
    
    
    .card {
        border-radius: 6px;
        -webkit-box-shadow: 0 1px 2.94px 0.06px rgba(140, 163, 193, 0.16);
        box-shadow: 0 1px 2.94px 0.06px rgba(170, 182, 198, 0.16);
        border: none;
        margin-bottom: 30px;
        -webkit-transition: all 0.3 ease-in-out;
        transition: all 0.3s ease-in-out;
    }
    
    .card .card-block {
        padding: 25px;
    }
    
    .order-card i {
        font-size: 30px;
    }
    
    .f-left {
        float: left;
    }
    
    .f-right {
        float: right;
    }
    
  /* Chrome, Safari, Edge, Opera */
  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  
  /* Firefox */
  input[type=number] {
    -moz-appearance: textfield;
  }

    </style>
    
{% endblock stylesheets %}
{% block content %}

 
<div class="main-content">
    <div class="page-content">
        <div class="container-fluid">
     
            <div class="row">
                <div class="col">
                    <div align="right">
                        <!-- Button trigger modal -->
                    
                <button type="button" class="btn btn-outline-primary" align="right" data-bs-toggle="modal" data-bs-target="#exampleModal" >
                    New Record
                  </button>
     
                </div>
                
                <br>
 <div class="card">
                <div class="card-header text-white" style="background-color: #006FCF;">
                   Work In Progress 
                  </div>
                 
                <div class="card-body">

                    <div class="table-responsive" id="data_posted">
                        <table class="table table-however"  id="queue_data">
                          
                               <thead>
                                <tr class="item-row">
                                    <th scope="col" style="background-color:  #f2f4f6; color:rgb(0, 0, 0); ">Date</th>
                                    <th scope="col" style="background-color:   #f2f4f6; color:rgb(0, 0, 0); ">Application Loan Number
                                    </th>
                                    <th scope="col" style="background-color:  #f2f4f6; color:rgb(0, 0, 0); ">Status
                                    </th>
                                    <th scope="col" style="background-color:   #f2f4f6; color:rgb(0, 0, 0); ">Start Time
                                    </th>
                         
                                </tr>
                            </thead>
                          
                                <tbody>
                                    {% for record_daetails in data %}
                                <tr>
                                    <td scope="col">
                                        {{record_daetails.t_date|date:'Y-m-d' }}

                                    </td>
                                   
                                    <td scope="col">
                                      
                                        <a href="view_record/{{ record_daetails.id }}">{{record_daetails.application_loan_number}} </a>
                                        
                                         </td>
                                    <td scope="col">{{ record_daetails.case_status}}</td>
                                    <td scope="col">{{ record_daetails.start_time|date:'d/m/Y H:i:s' }}</td>
                   
                                </tr>
                                {% endfor %}
                            </tbody>

                        </table>
                    </div>

                </div>
            </div>
                </div>

            </div>


    <center>
   

<!--Pagination-->
{% if page_obj %}


{% if page_obj.has_other_pages %}
<div class="btn-group" role="group" aria-label="Item pagination">
    {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-primary">&laquo;</a>
    {% endif %}

    {% for page_number in page_obj.paginator.page_range %}
        {% if page_obj.number == page_number %}
            <button class="btn btn-outline-primary active">
                <span>{{ page_number }} <span class="sr-only">(current)</span></span>
            </button>
        {% else %}
            <a href="?page={{ page_number }}" class="btn btn-outline-primary">
                {{ page_number }}
            </a>
        {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-primary">&raquo;</a>
    {% endif %}
</div>
{% endif %}
{% else %}
<p>No items found.</p>
{% endif %}

      <!--end of Pagination-->

</center>
      
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" >
    <div class="modal-dialog modal-dialog-centered" style="width: 350px;; margin:0 auto;">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New Record</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
       
        <div class="modal-body">
        <!-- Model FOrm -->
                
                    {% csrf_token %}
            <form action="{% url 'new' %}" method="post"> 
            
            {% csrf_token %}
            <div class="row">
                <div class="mb-3">
                    <label class="form-label">Date *</label>
                    <input type="date" class="form-control"  name="t_date" required>
                   </div>
                <div class="mb-3">
                    <label class="form-label">Application Loan Number
                        *</label>
                    <input type="number" onkeydown="if(event.key==='.'){event.preventDefault();}" onpaste="let pasteData = event.clipboardData.getData('text'); if(pasteData){pasteData.replace(/[^0-9]*/g,'');} " class="form-control" placeholder="SBA Loan Number"  name="application_loan_number" required>
                </div>
                
            </div>
          

        <!-- Ends here -->
        </div>
        <div class="modal-footer">
         
          <div class="mb-3" align="right">
            <button class="btn btn-lg btn-primary btn-block" type="submit">Submit</button>
            </div>
        </div>
    </form>
    
</div>
</div>
</div>
  


{% endblock content %}
{% block javascripts %}

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"> </script>
<script>
   
        // $('#datetimepicker-date').datetimepicker({
        //     format: 'L'
        // });
function view_record(case_id) {
var c_id=case_id

$.ajax
                    (
                        {                       // initialize an AJAX request
                            method: "POST",
                            url: "view_record",
                            contentType:"application/json",
                            dataType:'text',
                            data: JSON.stringify({
                              'c_id':c_id,
                                
                               
                                }),
                        }
                    )    

};
</script>
{% endblock javascripts %}